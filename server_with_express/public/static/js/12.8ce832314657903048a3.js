webpackJsonp([12],{1088:function(e,t,r){r(1180);var o=r(9)(r(1118),r(1230),null,null);e.exports=o.exports},1118:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var o=r(1140),i=r(249),s=r(162);t.default={name:"forgetPassword",data:function(){var e=this,t=this,r=function(e,r,o){new RegExp(/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,"i"),new RegExp(/^[a-zA-Z]{5,17}$/,""),new RegExp(/^[a-zA-Z0-9]{5,17}$/,""),t.$refs.IDType.value,new RegExp(/^[a-zA-Z0-9]{3,21}$/,"");o()},o=function(e,t,r){var o=/^[0-9]{1,20}$/;if(o.exec(t))r(new Error("请输入6-18位数字、字母和字符至少2种组合"));else if(o=/^[a-zA-Z]{1,20}$/,o.exec(t))r(new Error("请输入6-18位数字、字母和字符至少2种组合"));else{var i=/^[`~!@#$%^&*()_+<>?:"{},.\/;'[\]]{1,20}$/;i.exec(t)?r(new Error("请输入6-18位数字、字母和字符至少2种组合")):r()}},i=function(t,r,o){e.secondForm.password!==r?o(new Error("两次输入密码不一致!")):o()};return{vrfyCode:void 0,phone:void 0,smsId:"",disabledInput:!1,carouselHeight:"400px",isExist:"",userType:"",userStat:"",userId:"",disableGetSMSCodeStyle:{cursor:"default",color:"#cccccc"},countNum:0,isGetSMS:!1,isCheckSMS:!1,active:0,carouselIndex:0,firstForm:{phoneNumber:"",IDType:"00",IDNumber:"",bankAccountNumber:""},secondForm:{password:"",confirmPassword:""},firstRules:{phoneNumber:[{required:!0,message:"请输入登录手机号",trigger:"blur"},{pattern:/(^1)\d{10}$/,message:"请输入正确的手机号",trigger:"blur"},{validator:null,trigger:"blur"}],IDType:[{required:!0}],IDNumber:[{required:!0,message:"请输入证件号码",trigger:"blur"},{validator:r,trigger:"blur"}],bankAccountNumber:[{required:!0,message:"请输入结算账号",trigger:"blur"},{validator:r,trigger:"blur"}],validateCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:/^[0-9]{6}$/,message:"请输入6位短信验证码",trigger:"blur"},{validator:function(t,r,o){e.smsId?o():o(new Error("请先获取短信验证码"))},trigger:"blur"}]},secondRules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/.{6,18}/,message:"请输入6-18位数字、字母和字符至少2种组合",trigger:"blur"},{validator:o,trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{pattern:/.{6,18}/,message:"请输入6-18位数字、字母和字符至少2种组合",trigger:"blur"},{validator:i,trigger:"blur"}]}}},methods:{handleBack:function(){this.$emit("setForgetPwd",!1)},handleQueryUserInfo:function(){},handleNext:function(){var e=this;this.$refs.firstForm.validate(function(t){if(t&&!e.isCheckSMS&&e.smsId){e.isCheckSMS=!0;var r={smsId:e.smsId,chkAcct:e.firstForm.phoneNumber,vrfyCode:e.firstForm.validateCode,chkFlag:"01",chkChnl:"00"};e.phone=e.firstForm.phoneNumber,e.$ajaxPromise(o.b,r,"POST",!0).then(function(t){if("1"===t.userType)return e.$notify({title:"提示",message:"店员用户请联系店长重置密码",type:"info",duration:2e3}),e.$refs.firstForm.resetFields(),e.isCheckSMS=!1,!1;e.vrfyCode=e.firstForm.validateCode,e.$refs.firstForm.resetFields(),e.disabledInput=!1,e.countNum=0,e.$refs.forgetPwdCarousel.next(),e.carouselIndex++,e.isCheckSMS=!1,e.carouselHeight="200px"}).catch(function(t){e.isCheckSMS=!1})}})},handleBackConfirmUserInfo:function(){this.smsId="",this.carouselHeight="400px",this.$refs.forgetPwdCarousel.prev(),this.$refs.secondForm.resetFields(),this.carouselIndex--},handleConfirmPassword:function(){var e=this;this.$refs.secondForm.validate(function(t,n){if(t){var a="20190220120000AE",l=r.i(s.a)(r.i(i.a)(e.secondForm.password),a,a),c=e.$getRsaData(a,"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCr5WQEMYZqAy+VRSHYNB/HmoRm2nuExxTvrewIQmyXAgX6Ycb3bHxHpt097Wmzjb0/yVwimpM+zxVCRHtJXYcL0X8AeyCIr15jwTHdEzCoaxU6nB+8tLI0bpzXRNyxT3H6Z7+VIMzXEpH5Lc9iUcpFT44+UqnXSqplk9bEZoaJhQIDAQAB"),d={phone:e.phone,unUsedPwd:l,vrfyCode:e.vrfyCode,pwdType:"01",smsId:e.smsId,forgetPasswordFlag:"1",key:c};e.$ajaxPromise(o.c,d,"POST",!0).then(function(t){e.$refs.forgetPwdCarousel.next(),e.carouselIndex++}).catch(function(e){})}})},handleClickComplete:function(){this.$emit("setForgetPwd",!1)},handleIDTypeChange:function(){this.firstForm.IDNumber&&this.$refs.IDNumber.handleBlur()},handleClickGetPhoneValidateCode:function(){var e=this;this.$refs.firstForm.validateField("phoneNumber",function(t){if(0==e.countNum&&!t){var r={chkAcct:e.firstForm.phoneNumber,chkChnl:"00",chkFlag:"01"};e.$ajaxPromise(o.d,r,"POST",!0).then(function(t){e.disabledInput=!1,e.smsId=t.smsId,e.$refs.validateCode.handleBlur(),localStorage.setItem("smsId",t.smsId)}).catch(function(t){e.disabledInput=!1}),e.countNum=60;var i=e,s=setInterval(function(){--i.countNum<=0&&(clearInterval(s),i.countNum=0)},1e3)}})}},mounted:function(){e(document).scrollTop(0)},destroyed:function(){e(document).scrollTop(0)}}}.call(t,r(51))},1140:function(e,t,r){"use strict";r.d(t,"d",function(){return o}),r.d(t,"b",function(){return i}),r.d(t,"a",function(){return s}),r.d(t,"c",function(){return n});var o="/SOA/411.411103",i="/SOA/411.411104",s="/SOA/411.411220",n="/SOA/411.411157"},1158:function(e,t,r){t=e.exports=r(1075)(),t.push([e.i,".green-line{position:relative;top:3px;margin-right:3px;display:inline-block;width:6px;height:100%;background:#fe6b1c}.forget-pwd-title{font-size:32px;color:#333;font-weight:700;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.forget-pwd-title p{font-size:16px;color:#000}.forget-pwd-title p span{color:#ff5505}.reset-error-dialog p{margin:0}.reset-error-dialog .el-dialog__footer,.reset-error-dialog .el-dialog__header{padding:0;text-align:center}.reset-error-dialog .el-dialog__body{padding:36px 0 28px}.reset-error-dialog>.el-dialog{text-align:center;border-radius:10px;width:374px}.dialog-footer>.el-button:focus,.dialog-footer>.el-button:hover{background:#fe6b1c}.dialog-footer>.el-button{background:#fe6b1c;margin-bottom:27px}.button-item .el-button:nth-child(2){background:#999}.button-item .el-button:first-child{margin-right:19px;background:#fe6b1c}.public-button-style.el-button{padding:6px 0;height:34px;font-size:1.14em;width:120px;border:none}.button-item{margin-top:42px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.validate-code{display:inline-block;margin-left:12px;text-align:center;border-radius:2px;background:#fe6b1c;width:150px}.validate-text{cursor:pointer;padding:0 20px;color:#fff}.firstForm{width:480px}.el-form-item{width:100%}.firstForm .el-form-item,.secondForm .el-form-item{margin-bottom:20px}.firstForm .el-input__inner,.secondForm .el-input__inner{height:34px}.form-carousel .el-form-item__error{margin-left:16px}.form-carousel .el-input{margin-left:16px;width:356px}.form-carousel .el-carousel__container{width:480px;margin:0 auto}.steps-text-active{color:#202020}.steps-text{color:#999;color:#333;font-size:.85em;margin-top:5px;text-align:center}.step-line{position:absolute;top:22px;left:0;z-index:0;width:100%;background:#d9d9d9;display:inline-block;height:2px}.img-selected{width:46px;height:46px}.img-not-selected{width:30px;height:30px}.num-container{width:32px;height:32px;border-radius:50%;line-height:32px;color:#ff5505;display:inline-block;text-align:center;margin:0 12px 0 0;border:1px solid #ff5505}.num-container-arriving{background:#ff5505;color:#fff}.steps-imgs{-ms-flex-pack:distribute;justify-content:space-around}.steps-imgs,.steps-imgs .el-col{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.steps-imgs .el-col{height:46px;-ms-flex-pack:center;justify-content:center}.steps{overflow:hidden;margin-top:22px;margin-bottom:50px}.bg-container{min-height:calc(100% - 94px);font-size:14px;background:#ebf1f5;padding:0;height:100%}.reset-pwd-container{box-sizing:border-box;height:100%;padding:104px 287px 48px;width:100%;margin:0 auto;background:#fff}.firstForm .el-form-item__content,.secondForm .el-form-item__content{float:right}.firstForm .el-form-item:nth-child(3) .el-form-item__content,.secondForm .el-form-item:nth-child(3) .el-form-item__content{width:100%}.firstForm .el-form-item:nth-child(3) .el-form-item__content .el-button:nth-child(2),.secondForm .el-form-item:nth-child(3) .el-form-item__content .el-button:nth-child(2){float:right}",""])},1180:function(e,t,r){var o=r(1158);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r(1076)("a57de6f4",o,!0)},1230:function(e,t,r){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"bg-container"},[o("el-row",{staticClass:"reset-pwd-container"},[o("div",{staticClass:"forget-pwd-title"},[o("span",[e._v("忘记密码")]),e._v(" "),o("p",[e._v("记起来了，"),o("span",{staticStyle:{cursor:"pointer"},on:{click:e.handleBack}},[e._v("立即登录")])])]),e._v(" "),o("el-row",{staticClass:"steps"},[o("el-row",{staticClass:"steps-imgs"},[o("el-col",{staticStyle:{position:"relative","z-index":"1"}},[o("p",{staticClass:"num-container",class:{"num-container-arriving":0==e.carouselIndex}},[e._v("\n                        1\n                    ")]),e._v(" "),o("span",[e._v("身份信息验证")])]),e._v(" "),o("el-col",{attrs:{span:5}},[o("div",{staticStyle:{display:"inline-block",height:"1px",background:"rgba(233,233,233,1)",width:"192px"}})]),e._v(" "),o("el-col",{staticStyle:{position:"relative","z-index":"1"}},[o("p",{staticClass:"num-container",class:{"num-container-arriving":1==e.carouselIndex}},[e._v("\n                        2\n                    ")]),e._v(" "),o("span",[e._v("登录密码重置")])]),e._v(" "),o("el-col",{attrs:{span:5}},[o("div",{staticStyle:{display:"inline-block",height:"1px",background:"rgba(233,233,233,1)",width:"192px"}})]),e._v(" "),o("el-col",{staticStyle:{position:"relative","z-index":"1"}},[o("p",{staticClass:"num-container",class:{"num-container-arriving":2==e.carouselIndex}},[e._v("\n                        3\n                    ")]),e._v(" "),o("span",[e._v("重置结果")])])],1)],1),e._v(" "),o("el-carousel",{ref:"forgetPwdCarousel",staticClass:"form-carousel",attrs:{height:e.carouselHeight,arrow:"never",autoplay:!1,"indicator-position":"none"}},[o("el-carousel-item",[o("el-form",{directives:[{name:"show",rawName:"v-show",value:0==e.carouselIndex,expression:"carouselIndex == 0"}],ref:"firstForm",staticClass:"firstForm",attrs:{model:e.firstForm,rules:e.firstRules}},[o("el-form-item",{attrs:{label:"登录手机号",prop:"phoneNumber"}},[o("el-input",{attrs:{disabled:e.disabledInput,maxlength:11,placeholder:"请输入手机号"},on:{change:e.handleQueryUserInfo},model:{value:e.firstForm.phoneNumber,callback:function(t){e.$set(e.firstForm,"phoneNumber",t)},expression:"firstForm.phoneNumber"}})],1),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),o("el-form-item",{attrs:{label:"短信验证码",prop:"validateCode"}},[o("el-input",{ref:"validateCode",staticClass:"validate-input",staticStyle:{width:"188px"},attrs:{maxlength:6,placeholder:"验证码"},model:{value:e.firstForm.validateCode,callback:function(t){e.$set(e.firstForm,"validateCode",t)},expression:"firstForm.validateCode"}}),e._v(" "),o("span",{staticClass:"validate-code",on:{click:e.handleClickGetPhoneValidateCode}},[o("span",{staticClass:"validate-text",style:e.countNum>0?e.disableGetSMSCodeStyle:""},[e._v("获取验证码"),e.countNum>0?o("span",[e._v(" ("+e._s(e.countNum)+"s)")]):e._e()])])],1),e._v(" "),o("el-form-item",{staticClass:"button-item",staticStyle:{width:"100%"}},[o("el-button",{staticClass:"public-button-style public-button",on:{click:e.handleNext}},[e._v("下一步")]),e._v(" "),o("el-button",{staticClass:"public-button-style public-button",on:{click:e.handleBack}},[e._v("返回")])],1)],1)],1),e._v(" "),o("el-carousel-item",[o("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.carouselIndex,expression:"carouselIndex == 1"}],ref:"secondForm",staticClass:"secondForm",attrs:{"label-position":"left",model:e.secondForm,rules:e.secondRules}},[o("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[o("el-input",{attrs:{type:"password",maxlength:18,placeholder:"请输入密码"},model:{value:e.secondForm.password,callback:function(t){e.$set(e.secondForm,"password",t)},expression:"secondForm.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"确认登录密码",prop:"confirmPassword"}},[o("el-input",{attrs:{type:"password",maxlength:18,placeholder:"请再次输入密码"},model:{value:e.secondForm.confirmPassword,callback:function(t){e.$set(e.secondForm,"confirmPassword",t)},expression:"secondForm.confirmPassword"}})],1),e._v(" "),o("el-form-item",{staticClass:"button-item width-button",staticStyle:{display:"flex","justify-content":"space-between"}},[o("el-button",{staticClass:"public-button-style public-button",on:{click:e.handleConfirmPassword}},[e._v("下一步")]),e._v(" "),o("el-button",{staticClass:"public-button-style public-button",on:{click:e.handleBackConfirmUserInfo}},[e._v("返回")])],1)],1)],1),e._v(" "),o("el-carousel-item",[2==e.carouselIndex?o("el-row",{staticStyle:{"text-align":"center"}},[o("el-row",{staticStyle:{"margin-bottom":"20px"}},[o("img",{attrs:{width:"80",src:r(1077),alt:""}})]),e._v(" "),o("el-row",{staticStyle:{"font-size":"1.42em",color:"#333"}},[e._v("\n                        密码重置成功!\n                    ")]),e._v(" "),o("el-row",[o("el-button",{staticClass:"public-button-style public-button public-green",staticStyle:{margin:"26px 0 20px",width:"200px"},on:{click:e.handleClickComplete}},[e._v("\n                            返回登录\n                        ")])],1)],1):e._e()],1)],1)],1)],1)},staticRenderFns:[]}}});