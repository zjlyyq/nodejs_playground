webpackJsonp([15],{1087:function(t,e,a){a(1188);var i=a(9)(a(1117),a(1238),null,null);t.exports=i.exports},1117:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function i(t,e){for(var a=atob(t.split(",")[1]),i=[],n=0;n<a.length;n++)i.push(a.charCodeAt(n));return new Blob([new Uint8Array(i)],{type:e})}var n=a(50),o=a.n(n),l=a(32);e.default={data:function(){return{labelPosition:"left",step:1,formData:{mchtLicnType:"01",licenceExpiration:"1",mchtLicnNo:"",imgId:"",mchtLicnExpDate:""},globalType:[{label:"营业执照",value:"01"},{label:"组织机构代码",value:"03"},{label:"统一社会信用代码",value:"04"}],licenceExpArr:[{label:"长期有效",value:"0"},{label:"非长期有效",value:"1"}]}},mounted:function(){this.$route.query.mchtNo&&(this.mchtNo=this.$route.query.mchtNo,this.licnType=this.$route.query.licnType),this.formData.mchtLicnNo=this.mchtNo,this.formData.mchtLicnType=this.licnType},computed:o()({},a.i(l.c)({getSystemSelectMcht:"getSystemSelectMcht",getSystemUserInfo:"getSystemUserInfo"})),props:{mchtNo:{type:String,default:""},licnType:{type:String,default:"00"}},methods:o()({cancelUpdate:function(){this.$route.query&&this.$router.go(-1),this.$emit("cancelUpdate")},handleRemove:function(){var t=document.getElementsByClassName("el-upload")[0];t.style.display="block"},handleProgress:function(){}},a.i(l.b)({systemOpenedMenusSet:"systemOpenedMenusSet",systemIsLoginSet:"systemIsLoginSet",systemIsSelectMchtSet:"systemIsSelectMchtSet",systemUserInfoSet:"systemUserInfoSet",systemSelectMchtSet:"systemSelectMchtSet"}),{submit:function(){var t=this,e=""+this.formData.mchtLicnExpDate,a={phoneNo:this.getSystemUserInfo.phoneNo,mchtLicnExpDate:e,imgId:this.formData.imgId,mchtLicnNo:this.formData.mchtLicnNo,mchtLicnType:this.formData.mchtLicnType,licenceExpiration:this.formData.licenceExpiration};return"1"!=a.licenceExpiration||a.mchtLicnExpDate?this.formData.imgId?("0"==a.licenceExpiration&&(a.mchtLicnExpDate=""),void this.$ajaxPromise("/SOA/411.411188",a,"POST",!0).then(function(e){t.$notify({title:"提示",message:"您的证件更新请求已提交成功，1-2个工作日审核通过后会有短信通知，请耐心等待，若有疑问，详询我行客服95347。",type:"info",duration:2e3});var a=t.getSystemUserInfo;a.mchtLicnExpFlag=!1,t.systemUserInfoSet(a),t.$route.query&&t.$router.go(-1),t.$emit("cancelUpdate")}).catch(function(e){"4110081"==e.respCode&&t.$emit("logout")})):void this.$notify({title:"提示",message:"请上传执照照片",type:"info",duration:2e3}):void this.$notify({title:"提示",message:"请选择执照有效期",type:"info",duration:2e3})},handleUpload:function(e){var a=document.getElementsByClassName("el-upload")[0];a.style.display="none";var n=e.action,o=new FileReader,l=e.file;o.readAsDataURL(l);var s=this;o.onload=function(e){var a=e.target.result,o=new FormData,l=i(a,"image/jpg");o.append("chlNo","8001"),o.append("fileType","03"),o.append("chlFile","preOcr"),o.append("3112",l),t.ajax({type:"POST",url:n,async:!0,data:o,processData:!1,contentType:!1,timeout:2e4,success:function(t){var e=JSON.parse(t);s.formData.imgId=e.imgCode},error:function(t){},complete:function(t,e){}})}},handleSuccess:function(t){}})}}.call(e,a(51))},1166:function(t,e,a){e=t.exports=a(1075)(),e.push([t.i,".moneyLaundering .is-ready{width:220px}.moneyLaundering .el-button{width:136px;background:#ff5505;color:#fff;height:38px}.moneyLaundering .el-upload--picture-card,.moneyLaundering .el-upload-list__item-actions{width:220px}.moneyLaundering .el-input{width:380px}.moneyLaundering .container{width:100%;background:#fff}.moneyLaundering .body{width:464px;margin:136px auto}.moneyLaundering h1{font-size:32px;font-weight:bolder}.moneyLaundering p{font-size:24px;font-family:PingFangSC-Regular,PingFang SC;font-weight:bolder;color:#000;line-height:33px}.moneyLaundering img{width:164px}.moneyLaundering .item p{font-size:32px;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#000;line-height:45px}",""])},1188:function(t,e,a){var i=a(1166);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1076)("6f543191",i,!0)},1238:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"moneyLaundering"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.step,expression:"step == 1"}],staticClass:"container",staticStyle:{padding:"104px 287px 0 287px"}},[a("p",{staticStyle:{"font-size":"32px"}},[t._v("到期提醒")]),t._v(" "),a("div",{staticClass:"body"},[t.getSystemUserInfo.mchtLicnExpFlag?a("p",{staticStyle:{"margin-bottom":"54px"}},[t._v("\n                尊敬的客户，您的营业执照即将到期，请及时更新，以免影响您的正常使用。\n            ")]):t._e(),t._v(" "),t.getSystemUserInfo.mchtLicnExpFlag?t._e():a("p",[t._v("您的证件尚未到期，是否确定更新")]),t._v(" "),a("div",{staticStyle:{"margin-top":"64px"}},[a("el-button",{staticStyle:{float:"left"},on:{click:t.cancelUpdate}},[t._v("暂不更新")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:function(e){t.step=2}}},[t._v("立即更新")])],1),t._v(" "),t._m(0)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.step,expression:"step == 2"}],staticClass:"container",staticStyle:{padding:"64px 287px 0 287px"}},[a("div",{staticClass:"item"},[a("p",{staticStyle:{"font-size":"32px"}},[t._v("执照基本信息")]),t._v(" "),a("el-form",{attrs:{model:t.formData,inline:!0,"label-position":t.labelPosition}},[a("el-row",[a("el-col",{attrs:{offset:5}},[a("el-form-item",{staticClass:"btnContainer",attrs:{label:"执照类型","label-width":"120px"}},[a("el-select",{attrs:{filterable:"",placeholder:"请下拉选择执照类型"},model:{value:t.formData.mchtLicnType,callback:function(e){t.$set(t.formData,"mchtLicnType",e)},expression:"formData.mchtLicnType"}},t._l(t.globalType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{offset:5}},[a("el-form-item",{staticClass:"btnContainer",attrs:{label:"执照号","label-width":"120px"}},[a("el-input",{attrs:{disabled:"true"},model:{value:t.formData.mchtLicnNo,callback:function(e){t.$set(t.formData,"mchtLicnNo",e)},expression:"formData.mchtLicnNo"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{offset:5}},[a("el-form-item",{staticClass:"btnContainer",attrs:{label:"执照号有效期","label-width":"120px"}},[a("el-select",{attrs:{filterable:"",placeholder:""},model:{value:t.formData.licenceExpiration,callback:function(e){t.$set(t.formData,"licenceExpiration",e)},expression:"formData.licenceExpiration"}},t._l(t.licenceExpArr,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{offset:5}},[a("el-form-item",{staticClass:"btnContainer",attrs:{label:"执照号到期日","label-width":"120px"}},[a("el-date-picker",{attrs:{"value-format":"yyyyMMdd"},model:{value:t.formData.mchtLicnExpDate,callback:function(e){t.$set(t.formData,"mchtLicnExpDate",e)},expression:"formData.mchtLicnExpDate"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"item"},[a("p",{staticStyle:{"font-size":"32px"}},[t._v("执照影像上传")]),t._v(" "),a("div",{staticStyle:{width:"220px",margin:"0 auto"}},[a("el-upload",{attrs:{action:"/imgs-ceshi/ImageAction","list-type":"picture-card",limit:"1","on-success":t.handleSuccess,"on-remove":t.handleRemove,"on-error":t.handleError,"on-progress":t.handleProgress,"http-request":t.handleUpload,"show-file-list":"false"}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("input",{attrs:{type:"file",name:"",id:""}})],1)]),t._v(" "),a("div",{staticStyle:{margin:"32px auto 0 auto",width:"136px"}},[a("el-button",{on:{click:function(e){return t.submit()}}},[t._v("确认提交")])],1),t._v(" "),t._m(1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"204px auto 0 auto",width:"164px"}},[i("img",{attrs:{src:a(408),alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"4px auto",width:"164px"}},[i("img",{attrs:{src:a(408),alt:""}})])}]}}});